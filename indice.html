<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Índice dos Capítulos</title>
    <link rel="stylesheet" href="indicestyle.css">
    <script src="responsive.js" defer></script>
    <script src="script.js" defer></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // Recupera o último capítulo lido do localStorage
            const lastReadChapter = localStorage.getItem("lastReadChapter");
            console.log("Último capítulo lido recuperado do localStorage:", lastReadChapter); // Log para debug

            // Se houver um capítulo salvo no localStorage
            if (lastReadChapter) {
                // Remover destaque de todos os capítulos
                document.querySelectorAll('.chapter-list li').forEach(chapter => {
                    chapter.classList.remove('highlight');
                });

                // Adicionar destaque ao capítulo salvo
                const lastChapterElement = document.getElementById(lastReadChapter);
                if (lastChapterElement) {
                    lastChapterElement.classList.add('highlight');
                    console.log("Capítulo destacado:", lastReadChapter); // Log para debug
                }
            }
        });

        // Função para salvar o capítulo atual no localStorage ao clicar
        function setLastRead(chapterId) {
            localStorage.setItem("lastReadChapter", chapterId);
            console.log("Capítulo salvo no localStorage:", chapterId); // Log para debug
        }
    </script>
</head>
<body>
    <div class="container">
        <h1>Índice dos Capítulos</h1>
        <ul class="chapter-list">
            <li id="capitulo1"><a href="capitulo1.html" onclick="setLastRead('capitulo1')">Capítulo 1: O Caminho da Juventude e Suas Escolhas</a></li>
            <li id="capitulo2"><a href="capitulo2.html" onclick="setLastRead('capitulo2')">Capítulo 2: A Purificação em Cristo e o Novo Avivamento</a></li>
            <li id="capitulo3"><a href="capitulo3.html" onclick="setLastRead('capitulo3')">Capítulo 3: A Queda e a Sabedoria dos Justos</a></li>
        </ul>        
        <a href="index.html" class="back-button">Voltar à Capa</a>
    </div>
</body>
</html>